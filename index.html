<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…Ù†ØµØ© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Montserrat:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #f7f8fb;
      --surface: #ffffff;
      --text: #1e2430;
      --muted: #6b7280;
      --accent: #4f46e5;     /* Ø£Ø±Ø¬ÙˆØ§Ù†ÙŠ Ø£Ù†ÙŠÙ‚ */
      --accent-2: #10b981;   /* Ø£Ø®Ø¶Ø± Ù†Ø§Ø¹Ù… */
      --card-shadow: 0 12px 24px rgba(35, 57, 91, 0.08);
      --radius: 16px;
      --reader-font-size: 18px;
      --gradient: radial-gradient(1200px 400px at 10% -10%, rgba(79,70,229,0.12), transparent 70%),
                  radial-gradient(800px 300px at 90% 0%, rgba(16,185,129,0.12), transparent 60%);
    }

    [data-theme="dark"]{
      --bg: #0e1116;
      --surface: #131922;
      --text: #e5e7eb;
      --muted: #9aa3b2;
      --accent: #7c73ff;
      --accent-2: #22d3a1;
      --card-shadow: 0 14px 28px rgba(0,0,0,0.45);
      --gradient: radial-gradient(1200px 400px at 10% -10%, rgba(124,115,255,0.12), transparent 70%),
                  radial-gradient(800px 300px at 90% 0%, rgba(34,211,161,0.12), transparent 60%);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:'Roboto',sans-serif;
      background:
        var(--gradient),
        linear-gradient(180deg, var(--bg) 0%, var(--bg) 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
      transition: background-color .25s ease, color .25s ease;
    }

    /* Ø£Ø´ÙƒØ§Ù„ Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© */
    .blob{
      position: fixed;
      width: 380px; height: 380px;
      border-radius: 50%;
      filter: blur(60px);
      opacity: .25;
      z-index: -1;
      animation: float 18s ease-in-out infinite;
    }
    .blob.b1{ background: #4f46e5; top: -120px; left: -120px; animation-delay: 0s }
    .blob.b2{ background: #10b981; bottom: -140px; right: -120px; animation-delay: 4s }
    .blob.b3{ background: #f59e0b; top: 40%; left: -140px; animation-delay: 8s }
    @keyframes float {
      0%   { transform: translateY(0) translateX(0) scale(1) }
      50%  { transform: translateY(-20px) translateX(10px) scale(1.05) }
      100% { transform: translateY(0) translateX(0) scale(1) }
    }

    header{
      position: sticky; top:0; z-index: 20;
      backdrop-filter: saturate(140%) blur(8px);
      background: color-mix(in oklab, var(--surface) 90%, transparent);
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .wrap{
      max-width: 1200px; margin: 0 auto; padding: 16px 20px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    h1{
      margin:0; display:flex; align-items:center; gap:10px;
      font-family:'Montserrat',sans-serif; font-weight:700; font-size:22px;
      letter-spacing:.2px;
    }
    .brand-badge{
      display:inline-flex; align-items:center; justify-content:center;
      width:34px; height:34px; border-radius:8px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color:#fff; font-weight:700;
      box-shadow: 0 8px 20px rgba(0,0,0,.15);
      transform: rotate(-6deg);
    }
    nav{ display:flex; align-items:center; gap:10px; flex-wrap:wrap }
    nav a{
      text-decoration:none; color:var(--text);
      padding:8px 10px; border-radius:10px; font-weight:600;
      transition: background .15s ease, transform .15s ease;
    }
    nav a:hover{ background: rgba(0,0,0,0.05); transform: translateY(-1px) }
    .btn{
      position:relative; overflow:hidden;
      display:inline-flex; align-items:center; gap:8px;
      border:0; cursor:pointer; padding:10px 14px;
      border-radius:12px; background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color:#fff; font-weight:700; box-shadow: 0 12px 24px rgba(0,0,0,0.12);
      transition: transform .12s ease, box-shadow .12s ease, opacity .12s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 14px 28px rgba(0,0,0,0.18) }
    .btn.ghost{
      background: transparent; color: var(--text);
      border: 1px solid rgba(0,0,0,0.08); box-shadow:none;
    }
    /* Ù…ÙˆØ¬Ø© Ø²Ø± */
    .btn::after{
      content:''; position:absolute; width:10px; height:10px; background:rgba(255,255,255,.6);
      border-radius:50%; transform: scale(0); opacity:0;
      transition: transform .5s ease, opacity .6s ease;
    }

    /* Ø§Ù„Ø¨Ø·Ù„ */
    .hero{
      text-align:center; padding: 64px 20px 32px;
    }
    .hero h2{
      margin:0 0 12px; font-family:'Merriweather',serif; font-size:34px;
    }
    .hero p{ margin:0; color:var(--muted) }
    .hero-actions{ margin-top:18px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap }

    /* Ø£Ø¯ÙˆØ§Øª */
    .controls{
      max-width: 1200px; margin: 0 auto; padding: 18px 20px;
      display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .search{
      flex:1; min-width: 220px; display:flex; gap:8px; align-items:center;
      background: var(--surface); border-radius: 12px; padding: 8px; box-shadow: var(--card-shadow);
    }
    .search input{
      flex:1; border:0; outline:none; background:transparent; color:var(--text);
      padding: 8px; font-size: 15px;
    }

    /* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
    .cards{
      padding: 8px 20px 30px;
      display:grid; gap:18px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      max-width:1200px; margin: 0 auto;
    }
    .card{
      position:relative; background: var(--surface); border-radius: var(--radius);
      box-shadow: var(--card-shadow); overflow:hidden; isolation:isolate;
      transform-style: preserve-3d; perspective: 800px;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease, opacity .3s ease;
      opacity:0; transform: translateY(18px) scale(.98);
    }
    .card.is-in{ opacity:1; transform: translateY(0) scale(1) }
    .card:hover{ transform: translateY(-6px) rotateX(.5deg) rotateY(-.5deg) }
    .card::before{
      content:''; position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), transparent 40%);
      opacity:.6; pointer-events:none;
    }
    .card img{ width:100%; height:160px; object-fit:cover; display:block }
    .card .body{ padding: 14px }
    .card h3{ margin:0 0 6px; font-family:'Merriweather',serif; font-size:18px }
    .card p{ margin:0; color:var(--muted); font-size:14px }
    .badge{
      position:absolute; left:12px; top:12px; padding:6px 10px; border-radius:999px;
      background: rgba(79,70,229,.12); color: var(--accent); font-size:12px; font-weight:700;
      backdrop-filter: blur(4px); border: 1px solid rgba(79,70,229,.2)
    }
    .card .actions{ display:flex; gap:8px; margin-top:10px }

    /* Ø§Ù„Ù‚Ø§Ø±Ø¦ */
    .reader{
      max-width: 900px; margin: 18px auto 60px; background: var(--surface);
      padding: 22px; border-radius: 18px; box-shadow: var(--card-shadow);
      font-family:'Merriweather',serif; font-size: var(--reader-font-size); line-height: 1.9;
    }
    .reader .reader-controls{ display:flex; gap:8px; justify-content:flex-end; flex-wrap:wrap; margin-bottom:12px }
    .reader .reader-controls button{
      padding:8px 10px; border-radius:10px; border:1px solid rgba(0,0,0,.06); background:transparent; color:var(--text); font-weight:700; cursor:pointer
    }
    .reader .meta{ color:var(--muted); font-size:14px; margin-bottom:10px }

    footer{
      text-align:center; padding: 18px 12px; color: var(--muted);
    }

    @media (max-width:700px){
      .hero h2{ font-size:26px }
      .card img{ height:150px }
      .reader{ padding: 16px }
      .wrap{ padding: 12px 16px }
    }
  </style>
</head>
<body>

  <!-- Ø£Ø´ÙƒØ§Ù„ Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© -->
  <div class="blob b1"></div>
  <div class="blob b2"></div>
  <div class="blob b3"></div>

  <header>
    <div class="wrap">
      <h1>
        <span class="brand-badge">YA</span>
        Ù…Ù†ØµØªÙŠ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©
      </h1>
      <nav>
        <a href="#">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#library">Ø§Ù„Ù…ÙƒØªØ¨Ø©</a>
        <a href="#reader">Ø§Ù„Ù‚Ø§Ø±Ø¦</a>
        <button id="themeToggle" class="btn ghost" aria-label="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹">ğŸŒ™</button>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <h2>Ø§Ù‚Ø±Ø£ Ø¨ØªØ±ÙƒÙŠØ². ØµÙ…Ù‘Ù…Ù‘Ø§ Ø¨Ø£Ù†Ø§Ù‚Ø©.</h2>
      <p>Ù…ÙƒØªØ¨Ø© Ø£Ø³Ø§Ø³ÙŠØ© Ø¬Ø§Ù‡Ø²Ø©ØŒ ÙˆØ­Ø±ÙƒØ§Øª ØªÙØ§Ø¹Ù„ÙŠØ© ØªØ¬Ø¹Ù„ Ø§Ù„ØªØ¬Ø±Ø¨Ø© Ù…Ù†Ø¹Ø´Ø© ÙˆØ®ÙÙŠÙØ©.</p>
      <div class="hero-actions">
        <button id="startReading" class="btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¢Ù†</button>
        <button id="scrollLibrary" class="btn ghost">Ø§Ø³ØªØ¹Ø±Ø¶ Ø§Ù„Ù…ÙƒØªØ¨Ø©</button>
      </div>
    </section>

    <section id="library" class="controls" role="region" aria-label="Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…ÙƒØªØ¨Ø©">
      <div class="search">
        <input id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù†ÙˆØ§Ù†ØŒ Ù…Ø¤Ù„Ù Ø£Ùˆ ØªØµÙ†ÙŠÙ...">
        <button id="clearSearch" class="btn ghost">Ù…Ø³Ø­</button>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <span style="color:var(--muted);font-size:14px">Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨: <strong id="count">0</strong></span>
      </div>
    </section>

    <section class="cards" id="cardsContainer" aria-live="polite" aria-label="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙƒØªØ¨">
      <!-- ØªÙÙ…Ù„Ø£ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
    </section>

    <section class="reader" id="reader" aria-label="ØµÙØ­Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©">
      <div class="reader-controls" role="toolbar" aria-label="Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù‚Ø§Ø±Ø¦">
        <button id="fontDecrease" title="ØªØµØºÙŠØ± Ø§Ù„Ø®Ø·" aria-label="ØªØµØºÙŠØ± Ø§Ù„Ø®Ø·">-</button>
        <button id="fontReset" title="Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ" aria-label="Ø¥Ø¹Ø§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ø®Ø·">Ø­Ø¬Ù… Ø§ÙØªØ±Ø§Ø¶ÙŠ</button>
        <button id="fontIncrease" title="ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø·" aria-label="ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø®Ø·">+</button>
      </div>

      <div class="meta">Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ â€¢ ÙˆØ¶Ø¹ Ù„ÙŠÙ„ÙŠ â€¢ 2025</div>
      <h2 style="margin-top:0">ØµÙØ­Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</h2>
      <p>
        Ù‡Ø°Ø§ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ ÙŠØ¹Ø±Ø¶ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…ØµÙ…Ù…Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰ØŒ
        ÙˆØ§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ ÙˆØ§Ù„Ù„ÙŠÙ„ÙŠ Ù…Ù† Ø§Ù„Ù‡ÙŠØ¯Ø±. ØªÙ…Øª Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„Ù…Ø³Ø§ÙØ§Øª ÙˆØ§Ù„Ø³Ø·ÙˆØ± Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ù‡Ø§Ø¯ Ø§Ù„Ø¨ØµØ±ÙŠ.
      </p>
      <p>
        Ø¹Ù†Ø¯ Ø¨Ù†Ø§Ø¡ ÙØµÙˆÙ„ ÙˆÙƒØªØ¨ ÙØ¹Ù„ÙŠØ©ØŒ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª ÙˆÙÙ‚ Ø§Ø®ØªÙŠØ§Ø±Ùƒ. Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø®ÙÙŠÙØ©ØŒ Ø§Ù„Ø®Ù„ÙÙŠØ§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©ØŒ
        ÙˆØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„ØªÙŠ ØªØ¹Ø·ÙŠ Ø¥Ø­Ø³Ø§Ø³Ù‹Ø§ Ø¨Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø¯ÙˆÙ† Ø£Ù† ØªØ´ØªÙ‘Øª Ø§Ù„ØªØ±ÙƒÙŠØ².
      </p>
    </section>
  </main>

  <footer>Â© 2025 Ù…Ù†ØµØªÙŠ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</footer>

  <script>
    // Ø«ÙŠÙ…
    const body = document.body;
    const themeToggle = document.getElementById('themeToggle');
    function updateThemeBtn(){ themeToggle.textContent = body.getAttribute('data-theme') === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™'; }
    function loadTheme(){ const t = localStorage.getItem('theme'); if(t==='dark') body.setAttribute('data-theme','dark'); updateThemeBtn(); }
    function toggleTheme(){ const dark = body.getAttribute('data-theme')==='dark'; if(dark){ body.removeAttribute('data-theme'); localStorage.setItem('theme','light'); } else { body.setAttribute('data-theme','dark'); localStorage.setItem('theme','dark'); } updateThemeBtn(); }
    themeToggle.addEventListener('click', toggleTheme);
    loadTheme();

    // Ù…ÙˆØ¬Ø© Ø²Ø± (ripple)
    document.querySelectorAll('.btn').forEach(btn=>{
      btn.addEventListener('click', (e)=>{
        const rect = btn.getBoundingClientRect();
        const ripple = btn.querySelector(':scope > .ripple');
        if(ripple) ripple.remove();
        const span = document.createElement('span');
        span.className='ripple';
        const size = Math.max(rect.width, rect.height);
        span.style.width = span.style.height = size + 'px';
        span.style.left = (e.clientX - rect.left - size/2) + 'px';
        span.style.top = (e.clientY - rect.top - size/2) + 'px';
        btn.appendChild(span);
        setTimeout(()=> span.remove(), 600);
      });
    });
    // Ø³ØªØ§ÙŠÙ„ Ù…ÙˆØ¬Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
    const styleRipple = document.createElement('style');
    styleRipple.textContent = `
      .ripple{ position:absolute; border-radius:50%; background: rgba(255,255,255,.6); transform: scale(0); animation: ripple .55s ease-out forwards; pointer-events:none }
      @keyframes ripple{ to{ transform: scale(2.4); opacity:0 } }
    `;
    document.head.appendChild(styleRipple);

    // ÙƒØªØ¨ Ø£Ø³Ø§Ø³ÙŠØ©
    const defaultBooks = [
      { id: 1, title: "Ù…Ù‚Ø¯Ù…Ø© Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†", author: "Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†", category: "ØªØ§Ø±ÙŠØ®", description: "ÙƒØªØ§Ø¨ ØªØ£Ø³ÙŠØ³ÙŠ ÙÙŠ Ø¹Ù„Ù… Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®.", cover: "https://images.unsplash.com/photo-1519681393784-3cef5f3ff19d?q=80&w=1200&auto=format&fit=crop" },
      { id: 2, title: "Ø§Ù„Ø£Ø¬Ù†Ø­Ø© Ø§Ù„Ù…ØªÙƒØ³Ø±Ø©", author: "Ø¬Ø¨Ø±Ø§Ù† Ø®Ù„ÙŠÙ„ Ø¬Ø¨Ø±Ø§Ù†", category: "Ø£Ø¯Ø¨", description: "Ø±ÙˆØ§ÙŠØ© Ù‚ØµÙŠØ±Ø© Ø¨Ø·Ø§Ø¨Ø¹ ÙÙ„Ø³ÙÙŠ ÙˆØ´Ø§Ø¹Ø±ÙŠ.", cover: "https://images.unsplash.com/photo-1519681390377-1e88c6f802f4?q=80&w=1200&auto=format&fit=crop" },
      { id: 3, title: "Ø§Ù„Ø£Ø¨ Ø§Ù„ØºÙ†ÙŠ ÙˆØ§Ù„Ø£Ø¨ Ø§Ù„ÙÙ‚ÙŠØ±", author: "Ø±ÙˆØ¨Ø±Øª ÙƒÙŠÙˆØ³Ø§ÙƒÙŠ", category: "ØªÙ†Ù…ÙŠØ© Ø°Ø§ØªÙŠØ©", description: "Ø«Ù‚Ø§ÙØ© Ù…Ø§Ù„ÙŠØ© Ù…Ø¨Ø³Ø·Ø© Ø¨Ù†Ù‚Ø§Ø· Ø¹Ù…Ù„ÙŠØ©.", cover: "https://images.unsplash.com/photo-1544937950-fa07a98d237f?q=80&w=1200&auto=format&fit=crop" },
      { id: 4, title: "Ø£Ù„Ù Ù„ÙŠÙ„Ø© ÙˆÙ„ÙŠÙ„Ø©", author: "Ù…Ø¬Ù‡ÙˆÙ„", category: "ØªØ±Ø§Ø«", description: "Ø­ÙƒØ§ÙŠØ§Øª ØªØ±Ø§Ø«ÙŠØ© Ø¹Ø±Ø¨ÙŠØ© Ø´Ù‡ÙŠØ±Ø©.", cover: "https://images.unsplash.com/photo-1462126484952-5ea02b9d8d49?q=80&w=1200&auto=format&fit=crop" },
      { id: 5, title: "Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† ØªØ­Øª Ø§Ù„Ø£Ø±Ø¶", author: "Ø¯ÙŠØ³ØªÙˆÙŠÙØ³ÙƒÙŠ", category: "Ø£Ø¯Ø¨", description: "Ù†Øµ ÙÙ„Ø³ÙÙŠ Ø¨Ø¹Ù…Ù‚ Ù†ÙØ³ÙŠ.", cover: "https://images.unsplash.com/photo-1495640452828-3df6795cf69b?q=80&w=1200&auto=format&fit=crop" }
    ];
    let books = [...defaultBooks];

    // DOM
    const cardsContainer = document.getElementById('cardsContainer');
    const countEl = document.getElementById('count');
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');

    // Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ¨ Ù…Ø¹ Ø¯Ø®ÙˆÙ„ Ù…ØªØ­Ø±Ùƒ
    function renderBooks(filter=''){
      cardsContainer.innerHTML = '';
      const q = filter.trim().toLowerCase();
      const filtered = books.filter(b =>
        !q ||
        b.title.toLowerCase().includes(q) ||
        b.author.toLowerCase().includes(q) ||
        (b.category||'').toLowerCase().includes(q)
      );
      countEl.textContent = filtered.length;

      if(filtered.length===0){
        cardsContainer.innerHTML = '<p style="text-align:center;color:var(--muted);width:100%">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø­Ø§Ù„ÙŠ</p>';
        return;
      }

      filtered.forEach((b)=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          ${b.category ? `<div class="badge">${escapeHtml(b.category)}</div>` : ''}
          <img src="${escapeHtml(b.cover)}" alt="ØºÙ„Ø§Ù ${escapeHtml(b.title)}">
          <div class="body">
            <h3>${escapeHtml(b.title)}</h3>
            <p>${escapeHtml(b.author)}</p>
            <div class="actions">
              <button class="btn ghost" data-action="read" data-id="${b.id}">Ù‚Ø±Ø§Ø¡Ø©</button>
              <button class="btn ghost" data-action="info" data-id="${b.id}">Ù†Ø¨Ø°Ø©</button>
            </div>
          </div>
        `;
        cardsContainer.appendChild(card);
      });
      observeCards();
    }

    // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø±Ø¬
    let observer;
    function observeCards(){
      if(observer) observer.disconnect();
      observer = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.classList.add('is-in');
            observer.unobserve(e.target);
          }
        });
      }, { threshold: .12 });
      cardsContainer.querySelectorAll('.card').forEach(el=> observer.observe(el));
    }

    // Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
    cardsContainer.addEventListener('click', (e)=>{
      const btn = e.target.closest('button');
      if(!btn) return;
      const action = btn.getAttribute('data-action');
      const id = Number(btn.getAttribute('data-id'));
      const book = books.find(b=>b.id===id);
      if(!book) return;

      if(action==='read'){
        openBook(book);
        document.getElementById('reader').scrollIntoView({behavior:'smooth',block:'start'});
      } else if(action==='info'){
        showToast(`Ù†Ø¨Ø°Ø©: ${book.description || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø¨Ø°Ø© Ù…ØªØ§Ø­Ø©'}`);
      }
    });

    // Ù‚Ø§Ø±Ø¦
    const root = document.documentElement;
    const btnInc = document.getElementById('fontIncrease');
    const btnDec = document.getElementById('fontDecrease');
    const btnReset = document.getElementById('fontReset');
    const DEFAULT_FONT = 18, MIN_FONT = 12, MAX_FONT = 28, STEP = 2;

    function getFont(){ const v = getComputedStyle(root).getPropertyValue('--reader-font-size').trim(); return parseInt(v.replace('px',''),10) || DEFAULT_FONT; }
    function setFont(size){ const s = Math.min(MAX_FONT, Math.max(MIN_FONT, size)); root.style.setProperty('--reader-font-size', s+'px'); localStorage.setItem('readerFontSize', s); }

    btnInc.addEventListener('click', ()=> setFont(getFont()+STEP));
    btnDec.addEventListener('click', ()=> setFont(getFont()-STEP));
    btnReset.addEventListener('click', ()=> setFont(DEFAULT_FONT));

    // ØªØ­Ù…ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„Ø®Ø·
    const savedSize = parseInt(localStorage.getItem('readerFontSize'),10);
    if(savedSize && !isNaN(savedSize)) setFont(savedSize);

    // ÙØªØ­ ÙƒØªØ§Ø¨ ÙÙŠ Ø§Ù„Ù‚Ø§Ø±Ø¦
    function openBook(book){
      const reader = document.getElementById('reader');
      reader.querySelector('.meta').textContent = `${book.author} â€¢ ${book.category || 'ØºÙŠØ± Ù…ØµÙ†Ù'}`;
      reader.querySelector('h2').textContent = book.title;
      const paras = reader.querySelectorAll('p');
      paras[0].textContent = book.description || 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø¨Ø°Ø© Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„ÙƒØªØ§Ø¨.';
      paras[1].textContent = 'Ù‡Ø°Ø§ Ø¹Ø±Ø¶ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ù„Ù…Ø­ØªÙˆÙ‰. Ø¹Ù†Ø¯ Ø¥Ø¶Ø§ÙØ© ÙØµÙˆÙ„ ÙˆÙ…Ø­ØªÙˆÙŠØ§ØªØŒ Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ù†ØµÙˆØµ Ø§Ù„ÙƒØªØ§Ø¨ Ù‡Ù†Ø§.';
      showToast(`ØªÙ… ÙØªØ­: ${book.title}`);
    }

    // Ø¨Ø­Ø«
    searchInput.addEventListener('input', ()=> renderBooks(searchInput.value));
    clearSearch.addEventListener('click', ()=> { searchInput.value=''; renderBooks(''); });

    // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¨Ø·Ù„
    document.getElementById('startReading').addEventListener('click', ()=>{
      document.getElementById('reader').scrollIntoView({behavior:'smooth', block:'start'});
    });
    document.getElementById('scrollLibrary').addEventListener('click', ()=>{
      document.getElementById('library').scrollIntoView({behavior:'smooth', block:'start'});
    });

    // Toast Ø¨Ø³ÙŠØ·
    function showToast(msg){
      let toast = document.getElementById('toast');
      if(!toast){
        toast = document.createElement('div');
        toast.id='toast';
        toast.style.position='fixed';
        toast.style.bottom='20px';
        toast.style.right='20px';
        toast.style.background='color-mix(in oklab, var(--surface) 92%, transparent)';
        toast.style.color='var(--text)';
        toast.style.border='1px solid rgba(0,0,0,0.06)';
        toast.style.boxShadow='var(--card-shadow)';
        toast.style.padding='12px 14px';
        toast.style.borderRadius='12px';
        toast.style.zIndex='40';
        toast.style.opacity='0';
        toast.style.transform='translateY(10px)';
        toast.style.transition='opacity .2s ease, transform .2s ease';
        document.body.appendChild(toast);
      }
      toast.textContent = msg;
      requestAnimationFrame(()=>{
        toast.style.opacity='1';
        toast.style.transform='translateY(0)';
      });
      clearTimeout(window._toastTimer);
      window._toastTimer = setTimeout(()=>{
        toast.style.opacity='0'; toast.style.transform='translateY(10px)';
      }, 2200);
    }

    // Ø­Ù…Ø§ÙŠØ© Ù†ØµÙˆØµ
    function escapeHtml(str){ return String(str||'').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    // ØªÙ‡ÙŠØ¦Ø©
    renderBooks();

    // ØªØ­Ø³ÙŠÙ†Ø§Øª ØµØºÙŠØ±Ø©: Tilt Ù„Ø·ÙŠÙ Ø¹Ø¨Ø± Ø§Ù„Ù…Ø§ÙˆØ³
    cardsContainer.addEventListener('mousemove', (e)=>{
      const card = e.target.closest('.card');
      if(!card) return;
      const rect = card.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      const rotateX = ((y/rect.height) - 0.5) * -2.5;
      const rotateY = ((x/rect.width) - 0.5) * 2.5;
      card.style.transform = `translateY(-4px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
    });
    cardsContainer.addEventListener('mouseleave', ()=>{
      cardsContainer.querySelectorAll('.card').forEach(c => c.style.transform = '');
    });
  </script>
</body>
</html>
